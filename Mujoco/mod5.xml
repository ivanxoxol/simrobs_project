<?xml version="1.0" encoding="utf-8"?>
<mujoco model="two_wheel_balancer">

    <compiler angle="degree"/>
    <option timestep="0.001" integrator="RK4" density="1.2" gravity="0 0 -9.81"/>

    <worldbody>
        <light name="top" pos="0 0 3" dir="0 0 -1" directional="true"/>
        <geom name="floor" type="plane" size="10 10 0.1" rgba="0.8 0.9 0.8 1" friction="1.0 0.005 0.0001"/>

        <body name="base" pos="0 0 0.14">
            <freejoint name="base_joint"/>

            <!-- Body dimensions: half-size = 0.03, 0.05, 0.10 -->
            <geom name="torso" type="box" size="0.03 0.05 0.10"
                rgba="0.2 0.6 1 1" mass="0.8"/>

            <!-- Raise center of mass -->
            <inertial pos="0 0 0.06" mass="0.8" diaginertia="0.003 0.003 0.001"/>

            <!-- IMU -->
            <site name="imu" pos="0 0 0" size="0.005"/>

          
            <body name="left_wheel" pos="0 0.065 -0.08">
                <inertial pos="0 0 0" euler="90 0 0" mass="0.25" diaginertia="0.00020 0.00012 0.00012"/>
                <joint name="left_hinge" type="hinge" pos="0 0 0" axis="0 1 0" actuatorfrcrange="-5 5" damping="0.15"/>
                <geom name="left_wheel_geom" type="cylinder" size="0.04 0.01" euler="90 0 0" rgba="0.25 0.25 0.25 1"/>
            </body>

            <body name="right_wheel" pos="0 -0.065 -0.08">
                <inertial pos="0 0 0" euler="90 0 0" mass="0.25" diaginertia="0.00020 0.00012 0.00012"/>
                <joint name="right_hinge" type="hinge" pos="0 0 0" axis="0 1 0" actuatorfrcrange="-5 5" damping="0.15"/>
                <geom name="right_wheel_geom" type="cylinder" size="0.04 0.01" euler="90 0 0" rgba="0.25 0.25 0.25 1"/>
            </body>
        </body>
    </worldbody>

    <actuator>
        <!-- Use velocity actuators for stability -->
        <velocity name="left_motor" joint="left_hinge" kv="0.9" gear="1"/>
        <velocity name="right_motor" joint="right_hinge" kv="0.9" gear="1"/>
    </actuator>

    <sensor>
        <gyro name="gyro" site="imu"/>
        <accelerometer name="acc" site="imu"/>
    </sensor>

    <contact>
        <pair geom1="floor" geom2="left_wheel_geom"  friction="0.4 0.4 0.07 0.001 0.001"/>
        <pair geom1="floor" geom2="right_wheel_geom" friction="0.4 0.4 0.07 0.001 0.001"/>
    </contact>

</mujoco>
